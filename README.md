# terraform-foreman
Foreman provider for Terraform

### Usage

Add the following to your ~/.terraformrc
```
providers {
     foreman = "/path/to/bin/terraform-foreman"
}
```

Sample terraform config. Save this as a example.tf or similar
```
resource "foreman_dns" "example" {
	host = "example.com"
}


resource "foreman_server" "example" {
    name = "host${count.index}.example.com"
    location_id = 1
    organization_id = 1
    puppet_class_ids = ["1","2","3"]
    count = 3
}

resource "foreman_server" "complex_VM" {
    name = "complex.example.com"
    location_id = 1		# ID of foreman location, if locations are enabled
    organization_id = 2		# ID of foreman organization, if orgs are enabled
    environment_id = 4		# ID of foreman environment
    ip = "10.12.2.2"
    mac = "00:50:56:8f:29:73"
    architecture_id = 1 	# x86_64
    domain_id = 1		# "First foreman domain"
    puppet_proxy_id = 2		# ID of your puppet master defined in foreman
    puppet_class_ids = ["351"]  # Puppet class ids
    operatingsystem_id = 1	# ID of a foreman operating system
    medium_id = 7		# ID of a foreman repository
    ptable_id = 3		# ID of a foreman partition table
    subnet_id = 3		# ID of a foreman subnet
    compute_resource_id = 1	# ID of a foreman compute resource, for example vCenter, docker, openstack nova
    model_id = 1		# ID of a foreman compute model
    owner_id = 17		# ID of a foreman user, likely that of the service account used to create it
    puppet_ca_proxy_id = 2	# ID of your puppet CA master defined in foreman
    build = false		# Build mode, determines if the PXE configs are generated by foreman
    enabled = true		# Enabled?? NFI
    provision_method = "build"  
    managed = true		
    comment = ""
}
```

if you have already built the terraform-foreman source then you are ready to test. Navigate to the directory where you saved your terraform config (example.tf) and execute:

```
terraform plan
```

this should output something similar to


if you have already planned the terraform resources you can taint them essentially marking them to be rebuilt

```
# Taint the complex example vm
terraform taint foreman_server.complex_VM
```

## Build
In order to build/install the source, navigate to the checked out directory and ensure your $GOPATH is defined.

Execute
```
go install
```





